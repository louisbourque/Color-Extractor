function FileDragHover(e){e.stopPropagation(),e.preventDefault(),e.target.className="dragover"==e.type?"hover":""}function FileSelectHandler(e){FileDragHover(e),app.error.innerHTML="",app.output.innerHTML="";for(var t,a=e.target.files||e.dataTransfer.files,n=0;t=a[n];n++)"image"!=t.type.substring(0,5)?app.error.innerHTML+="Unsupported file type: "+t.name+"<br>":loadImage(t)}function loadImage(e){var t=new FileReader;t.onload=function(e){var t=getImageHTML(e.target.result);console.log(t),app.output.appendChild(t);var a=t.getElementsByTagName("img")[0],n=t.getElementsByClassName("image-details")[0];addEvent(a,"load",function(){n.innerHTML=getImageDetails(a),document.documentElement.scrollTop=document.body.scrollTop=offset(app.output).top})},t.readAsDataURL(e)}function getImageHTML(e){var t=document.createElement("div");return t.className="image-div",t.innerHTML='<img src="'+e+'"><div class="image-details"></div>',t}function getImageDetails(e){return console.log(e),"Height: "+e.height+" Width: "+e.width}var app=app||{};app.fileselect=document.getElementById("file-select-input"),app.error=document.getElementById("error"),app.output=document.getElementById("output"),window.File&&window.FileList&&window.FileReader&&(app.fileselect.addEventListener("change",FileSelectHandler,!1),document.addEventListener("dragover",FileDragHover,!1),document.addEventListener("dragleave",FileDragHover,!1),document.addEventListener("drop",FileSelectHandler,!1),document.getElementById("filedrag").style.display="block");
function addEvent(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}function removeEvent(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)}function offset(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}